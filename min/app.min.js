var HttpModule=function(){function t(){function e(t){var e="";if("object"!=typeof t)throw new TypeError("Invalid data type. Must be array or object");for(var n in t)!t.hasOwnProperty(n)||"string"!=typeof t[n]&&"number"!=typeof t[n]&&"boolean"!=typeof t[n]||(e+=n+"="+encodeURIComponent(t[n])+"&");return e=e.slice(0,-1)}function n(t){return{code:t.status,message:t.response}}function o(){var t="?";return r.options.credentials.forEach(function(e){var n=e+"="+localStorage[e]+"&";t+=n}),t=t.slice(0,-1)}var r=this;if(!this instanceof t)throw new Error("Invalid call of HttpService. Called without new");this.options={},this.sendRequest=function(t,s,i){return new Promise(function(a,u){var p,c=o(),f=new XMLHttpRequest;f.open(t.toUpperCase(),s+c,!0),i&&(i=e(i),f.setRequestHeader("Content-type","application/x-www-form-urlencoded")),f.onreadystatechange=function(){if(4==f.readyState)if(403==f.status&&r.options.handlers["403"](),200!=f.status)u(n(f));else{try{p=JSON.parse(f.response)}catch(t){p=f.response}a(p)}},f.send(i)})},this.sendBinary=function(t,e,s){return new Promise(function(i,a){var u,p=o(),c=new XMLHttpRequest,f=new FormData;c.open("POST",t+p,!0),f.append("files",e),c.upload.onprogress=function(t){t.lengthComputable&&"function"==typeof s&&s(t.loaded/t.total*100)},c.onreadystatechange=function(){if(4==c.readyState)if(403==c.status&&r.options.handlers["403"](),200!=c.status)a(n(c));else{try{u=JSON.parse(c.response)}catch(t){u=c.response}i(u)}},c.send(f)})}}var e,n=!1;return t.prototype.get=function(t){return this.sendRequest("get",t)},t.prototype.post=function(t,e){return this.sendRequest("post",t,e)},t.prototype.put=function(t,e){return this.sendRequest("put",t,e)},t.prototype.delete=function(t){return this.sendRequest("delete",t)},t.prototype.postBinary=function(t,e,n){return this.sendBinary(t,e,n)},t.prototype.configure=function(t){this.options=t||{}},e=new t,{init:function(t){return n&&console.warn("HttpService was already instantiated. Settings may be overwritten"),e.configure(t),n=!0,e}}}();
function ResourceService(t){this.apiurl=t}function ResourceNode(t,o){this.criteriaList=[],this.routes={};for(var e in t)this.criteriaList.push(e),this.routes[e]="root"==e?o+t[e]:o+t.root+t[e]}ResourceService.prototype.configure=function(t){var o=this;t.forEach(function(t){if("object"==typeof t&&t.root){var e=t.root.substring(1);o[e]=new ResourceNode(t,o.apiurl)}})},ResourceNode.prototype.get=function(t,o){t=t?t:"root";var e=this.routes[t].replace(":"+t+"Id","")+(o||"");return $http.get(e)},ResourceNode.prototype.post=function(t,o){o||(o=t,t="root");var e=this.routes[t];return $http.post(e,o)},ResourceNode.prototype.put=function(t,o){o||(o=t,t="root");var e=this.routes[t];return $http.put(e,o)},ResourceNode.prototype.delete=function(t,o){t=t?t:"root";var e=this.routes[t].replace(":"+t+"Id","")+(o||"");return $http.delete(e)};
function Toolkit(){return{getTimestamp:function(){var e;return e=this.getDate()+" "+this.getTime()},getDate:function(e){var t=new Date,n=t.getDate(),r=t.getMonth()+1,a=t.getFullYear();return 10>n&&(n="0"+n),10>r&&(r="0"+r),t=a+"-"+r+"-"+n,e&&(t=t.replace(/-/g,".")),t},getTime:function(e){var t=new Date,n=t.getHours(),r=t.getMinutes();return e?Date.now():(r=10>r?"0"+r.toString():r,n+":"+r)},newGUID:function(){for(var e="",t="0123456789abcdef".split(""),n=0;32>n;n++){var r=Math.floor(16*Math.random());switch(n){case 8:e+="-";break;case 12:r=4}e+=t[r]}return e},getCheckedElements:function(e){var t=[];for(var n in e)e[n].hasOwnProperty("isChecked")&&1==e[n].isChecked&&t.push(e[n].ident||e[n].informations.identnumber);return t}}}
var $http=HttpModule.init(),App={resource:new ResourceService("https://quac.triangulum.uberspace.de/quac-api/api"),toolkit:new Toolkit,router:null,purr:null,init:function(){this.router=document.querySelector("app-router"),this.purr=document.querySelector("purr-note")}};App.resource.configure([]);